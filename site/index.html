<!DOCTYPE html>
<html>
  <head>
    <title>A•G•O•G</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel='stylesheet' href='style.css'>
    <script type='text/javascript' src='js/PortFunnel.js'></script>
    <script type='text/javascript' src='js/PortFunnel/LocalStorage.js'></script>
    <script type='text/javascript' src='js/PortFunnel/WebSocket.js'></script>
    <script type='text/javascript' src='js/PortFunnel/Notification.js'></script>
    <script type='text/javascript' src='elm.js'></script>
    </script>
  </head>
  <body>
    <script type='text/javascript'>
      // It's an application, so it doesn't need a div.
      var app = Elm['Main'].init({ flags: true });

      var modules = ['LocalStorage'];
      PortFunnel.subscribe(app, {modules: modules});

      var onVisibilityChange = app.ports.onVisibilityChange;
      document.addEventListener(
          'visibilitychange',
          function() {
              onVisibilityChange.send(document.visibilityState == 'visible');
          }
      );                                

      var sounds = [];
      var files = ['jump.mp3', 'move.mp3'];
      for (var i = 0; i < files.length; i++) {
          var file = 'sounds/' + files[i];
          sounds[file] = new Audio(file);
      }
      app.ports.playAudio.subscribe(function(file) {
          var audio = sounds.file;
          if (!audio) {
              audio = new Audio(file);
              sounds[file] = audio;
          }
          audio.play();
      });
    </script>

   <noscript>
    <center>
      <h1>A•G•O•G</h1>
      <div style='display: inline-block; margin: auto;'>
        <p><a href='./'>A•G•O•G</a> is a board game designed by Christopher St. Clair.
        <p style='color: red; font-size: 120%;'>A•G•O•G requires a JavaScript-enabled browser to get more than this static page.</p>
        <p>&copy; 2019-2021 Bill St. Clair<br/>
          <a href='https://github.com/billstclair/agog'>GitHub</a></p>
      </div>
    </center>
   </noscript>
   

</body>
</html>
